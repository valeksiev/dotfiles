Application.factory 'Group',
['RailsApi',
(RailsApi) ->

  Model = {}

  Model.get_students = ( group_id = null, callback ) ->
    RailsApi.get("/groups/#{group_id}/students", {}, (response) ->
      if _.isFunction(callback)
          callback(response)
      []
    )

  Model.remove_student = (group_id, student_id, callback) ->
    RailsApi.remove("/groups/#{group_id}/students/#{student_id}", {}, {}, (response) ->
      if _.isFunction(callback)
        if _.has(response, 'data') and _.has(response.data, 'account')
          callback(response.data.account)
      []
    )

  Model.add_application = (group_id, application_id, callback) ->
    RailsApi.post(
      '/groups/add_application',
      {},
      { gorup_id: group_id, application_id: application_id },
      (response) ->
        callback(response)
    )


  return Model
]
